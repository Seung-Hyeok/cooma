<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
layout:decorate="total/adTemp">

<th:block layout:fragment="adTitle">
	<title>관리자_매출</title>
</th:block>

<th:block layout:fragment="adContent">

<script>

var startDateInput = document.getElementById("start");
var endDateInput = document.getElementById("end");

startDateInput.addEventListener("change", function() {
  endDateInput.min = startDateInput.value;
});
	
</script>
	
	<div class="shresermenu">
		<a href="/admin/sales/1">매출내역</a>
		<a href="/admin/statistics">매출통계</a>
	</div>
	
	<h3>매출내역</h3>

	<table border="" align="center">
		<form action="" th:object="${PData}" >
			<tr>
				<td colspan="10" align="right">
					매출 조회 기간 <input type="date" id="start" th:field="*{startD}"/>~
                	<input type="date" id="end" th:field="*{endD}" />
                	<input type="submit" value="검색">
					
				</td>
			</tr>
		</form> 
		
		<tr align="center">
			<td>번호</td>
			<td>아이디</td>
			<td>강아지이름</td>
			<td>이용권종류</td>
			<td>신청교육</td>
			<td>결제일자</td>
			<td>이용권금액</td>
			<td>교육비</td>
			<td>결제금액</td>
			<td>환불금액</td>
		</tr>
		<tr th:each="dto, dtostat : ${mainData}" align="center">
			<td th:text="${dto.reserNo}"></td>
			<td th:text="${dto.pid}"></td>
			<td th:text="${dto.dname}"></td>
			<td th:text="|${dto.kind} (${dto.gap()})|"></td>
			<td th:text="${dto.edu}" ></td>
			<td th:text="${dto.pDate()}"></td>
			<td th:text="${dto.pay()}"></td>
			<td th:text="${dto.epay()}"></td>
			<td th:text="${dto.tpay()}" style="color:blue;"></td>
			<td th:text="${dto.refund()}" style="color:red;"></td>
		</tr>
		<tr>
			<td colspan="5" th:text="|총 매출액|"></td>
			<td colspan="9" th:text="|${tf} - ${rf} = ${tot}|"></td>
		</tr>
	</table>
	<div  class="shsales">
		<div class="shsales2" th:each="dto, dtostat : ${mainData}" >
			<div th:text="${dto.reserNo}" style="width:36px;"></div>
			<div th:text="${dto.pid}"style="width:70px;"></div>
			<div th:text="${dto.dname}"style="width:70px;"></div>
			<div th:text="|${dto.kind} (${dto.gap()})|" style="width:120px;"></div>
			<div th:text="${dto.edu}" style="width:70px;"></div>
			<div th:text="${dto.pDate()}"></div>
			<div th:text="${dto.pay()}" style="width:70px;"></div>
			<div th:text="${dto.epay()}" style="width:60px;"></div>
			<div th:text="${dto.tpay()}" style="color:blue; width:70px;"></div>
			<th:block th:if="${dto.refund().isEmpty()}">
				<div th:text="0" style="color:#eee; width:70px; "></div>
			</th:block>
			<th:block th:unless="${dto.refund().isEmpty()}">
				<div th:text="${dto.refund()}" style="color:red; width:70px; "></div>
			</th:block>
			
		</div>
	</div>
	
</th:block>

<th:block layout:fragment="adAdd-content">
</th:block>

</html>